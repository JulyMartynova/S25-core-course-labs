# Task 1
## Verification of ArgoCD configuration:
```bash
argocd app sync python-app
TIMESTAMP  GROUP        KIND   NAMESPACE                  NAME    STATUS   HEALTH        HOOK  MESSAGE
2025-04-27T23:01:52+02:00         PersistentVolumeClaim     default  python-app-visits-pvc        OutOfSync  Missing              
2025-04-27T23:01:52+02:00             Secret                default         my-app-secret         OutOfSync  Missing              
2025-04-27T23:01:52+02:00            Service                default  python-app-backend-svc       OutOfSync  Missing              
2025-04-27T23:01:52+02:00            Service                default     python-app-db-svc         OutOfSync  Missing              
2025-04-27T23:01:52+02:00   apps  Deployment                default    python-app-backend         OutOfSync  Missing              
2025-04-27T23:01:52+02:00   apps  Deployment                default         python-app-db         OutOfSync  Missing              
2025-04-27T23:01:52+02:00          ConfigMap                default    python-app-db-init         OutOfSync  Missing              
2025-04-27T23:01:52+02:00         PersistentVolumeClaim     default     python-app-db-pvc         OutOfSync  Missing              
2025-04-27T23:01:52+02:00            Service                default  python-app-frontend-svc      OutOfSync  Missing              
2025-04-27T23:01:52+02:00   apps  Deployment                default   python-app-frontend         OutOfSync  Missing              
2025-04-27T23:01:52+02:00  batch         Job                default  python-app-pre-install-hook                                  
2025-04-27T23:01:52+02:00          ConfigMap                default  python-app-app-config        OutOfSync  Missing              
2025-04-27T23:01:53+02:00  batch         Job     default  python-app-pre-install-hook   Running   Synced     PreSync  job.batch/python-app-pre-install-hook created
2025-04-27T23:02:27+02:00             Secret     default         my-app-secret    Synced  Missing              
2025-04-27T23:02:27+02:00          ConfigMap     default  python-app-app-config    Synced  Missing              
2025-04-27T23:02:27+02:00          ConfigMap     default    python-app-db-init     Synced  Missing              
2025-04-27T23:02:28+02:00         PersistentVolumeClaim     default  python-app-visits-pvc    Synced  Progressing              
2025-04-27T23:02:28+02:00         PersistentVolumeClaim     default     python-app-db-pvc     Synced  Progressing              
2025-04-27T23:02:28+02:00            Service                default  python-app-backend-svc     Synced  Healthy              
2025-04-27T23:02:28+02:00            Service                default     python-app-db-svc       Synced  Healthy              
2025-04-27T23:02:28+02:00            Service                default  python-app-frontend-svc    Synced  Healthy              
2025-04-27T23:02:28+02:00         PersistentVolumeClaim     default     python-app-db-pvc       Synced  Healthy              
2025-04-27T23:02:29+02:00         PersistentVolumeClaim     default  python-app-visits-pvc    Synced  Healthy                  
2025-04-27T23:02:29+02:00   apps  Deployment                default         python-app-db     Synced  Progressing              
2025-04-27T23:02:29+02:00   apps  Deployment                default   python-app-frontend     Synced  Progressing              
2025-04-27T23:02:29+02:00   apps  Deployment                default    python-app-backend     Synced  Progressing              
2025-04-27T23:02:30+02:00            Service                default     python-app-db-svc           Synced   Healthy                  service/python-app-db-svc created
2025-04-27T23:02:30+02:00            Service                default  python-app-frontend-svc        Synced   Healthy                  service/python-app-frontend-svc created
2025-04-27T23:02:30+02:00   apps  Deployment                default         python-app-db           Synced   Progressing              deployment.apps/python-app-db created
2025-04-27T23:02:30+02:00            Service                default  python-app-backend-svc
00:12


Synced   Healthy                  service/python-app-backend-svc created
2025-04-27T23:02:30+02:00             Secret                default         my-app-secret           Synced   Missing                  secret/my-app-secret created
2025-04-27T23:02:30+02:00          ConfigMap                default  python-app-app-config          Synced   Missing                  configmap/python-app-app-config created
2025-04-27T23:02:30+02:00          ConfigMap                default    python-app-db-init           Synced   Missing                  configmap/python-app-db-init created
2025-04-27T23:02:30+02:00         PersistentVolumeClaim     default     python-app-db-pvc           Synced   Healthy                  persistentvolumeclaim/python-app-db-pvc created
2025-04-27T23:02:30+02:00         PersistentVolumeClaim     default  python-app-visits-pvc          Synced   Healthy                  persistentvolumeclaim/python-app-visits-pvc created
2025-04-27T23:02:30+02:00   apps  Deployment                default    python-app-backend           Synced   Progressing              deployment.apps/python-app-backend created
2025-04-27T23:02:30+02:00   apps  Deployment                default   python-app-frontend           Synced   Progressing              deployment.apps/python-app-frontend created
2025-04-27T23:02:30+02:00  batch         Job                default  python-app-pre-install-hook  Succeeded   Synced         PreSync  Reached expected number of succeeded pods
2025-04-27T23:03:52+02:00   apps  Deployment     default    python-app-backend    Synced  Healthy              deployment.apps/python-app-backend created
2025-04-27T23:09:16+02:00   apps  Deployment     default   python-app-frontend    Synced  Healthy              deployment.apps/python-app-frontend created
2025-04-27T23:09:34+02:00   apps  Deployment     default         python-app-db    Synced  Healthy              deployment.apps/python-app-db created
2025-04-27T23:09:34+02:00  batch         Job     default  python-app-post-install-hook   Running   Synced    PostSync  job.batch/python-app-post-install-hook created
2025-04-27T23:10:04+02:00  batch         Job     default  python-app-post-install-hook  Succeeded   Synced    PostSync  Reached expected number of succeeded pods

Name:               argocd/python-app
Project:            default
Server:             https://kubernetes.default.svc
Namespace:          default
URL:                https://localhost:8080/applications/python-app
Source:
- Repo:             https://github.com/JulyMartynova/S25-core-course-labs.git
  Target:           lab13
  Path:             k8s/app-python
  Helm Values:      values.yaml
SyncWindow:         Sync Allowed
Sync Policy:        Automated
Sync Status:        Synced to lab13 (73c902e)
Health Status:      Healthy

Operation:          Sync
Sync Revision:      73c902e321b53a54efa4ec315355960bc00ad11b
Phase:              Succeeded
Start:              2025-04-27 23:01:44 +0200 CEST
Finished:           2025-04-27 23:10:04 +0200 CEST
Duration:           8m20s
Message:            successfully synced (no more tasks)

GROUP  KIND                   NAMESPACE  NAME                          STATUS     HEALTH   HOOK      MESSAGE
batch  Job                    default    python-app-pre-install-hook   Succeeded           PreSync   Reached expected number of succeeded pods
       Secret                 default    my-app-secret                 Synced                        secret/my-app-secret created
       ConfigMap              default    python-app-app-config         Synced                        configmap/python-app-app-config created
       ConfigMap              default    python-app-db-init            Synced                        configmap/python-app-db-init created
       PersistentVolumeClaim  default    python-app-db-pvc             Synced     Healthy            persistentvolumeclaim/python-app-db-pvc created
       PersistentVolumeClaim  default    python-app-visits-pvc         Synced     Healthy            persistentvolumeclaim/python-app-visits-pvc created
default    python-app-backend-svc        Synced     Healthy            service/python-app-backend-svc created
       Service                default    python-app-db-svc             Synced     Healthy            service/python-app-db-svc created
       Service                default    python-app-frontend-svc       Synced     Healthy            service/python-app-frontend-svc created
apps   Deployment             default    python-app-backend            Synced     Healthy            deployment.apps/python-app-backend created
apps   Deployment             default    python-app-db                 Synced     Healthy            deployment.apps/python-app-db created
apps   Deployment             default    python-app-frontend           Synced     Healthy            deployment.apps/python-app-frontend created
batch  Job                    default    python-app-post-install-hook  Succeeded           PostSync  Reached expected number of succeeded pods
```
```bash
argocd app get python-app
Name:               argocd/python-app
Project:            default
Server:             https://kubernetes.default.svc
Namespace:          default
URL:                https://localhost:8080/applications/python-app
Source:
- Repo:             https://github.com/JulyMartynova/S25-core-course-labs.git
  Target:           lab13
  Path:             k8s/app-python
  Helm Values:      values.yaml
SyncWindow:         Sync Allowed
Sync Policy:        Automated
Sync Status:        Synced to lab13 (73c902e)
Health Status:      Progressing

GROUP  KIND                   NAMESPACE  NAME                          STATUS     HEALTH       HOOK      MESSAGE
batch  Job                    default    python-app-pre-install-hook   Succeeded               PreSync   Reached expected number of succeeded pods
       Secret                 default    my-app-secret                 Synced                            secret/my-app-secret created
       ConfigMap              default    python-app-app-config         Synced                            configmap/python-app-app-config created
       ConfigMap              default    python-app-db-init            Synced                            configmap/python-app-db-init created
       PersistentVolumeClaim  default    python-app-db-pvc             Synced     Healthy                persistentvolumeclaim/python-app-db-pvc created
       PersistentVolumeClaim  default    python-app-visits-pvc         Synced     Healthy                persistentvolumeclaim/python-app-visits-pvc created
       Service                default    python-app-backend-svc        Synced     Healthy                service/python-app-backend-svc created
       Service                default    python-app-db-svc             Synced     Healthy                service/python-app-db-svc created
       Service                default    python-app-frontend-svc       Synced     Healthy                service/python-app-frontend-svc created
apps   Deployment             default    python-app-backend            Synced     Progressing            deployment.apps/python-app-backend created
apps   Deployment             default    python-app-db                 Synced     Healthy                deployment.apps/python-app-db created
apps   Deployment             default    python-app-frontend           Synced     Healthy                deployment.apps/python-app-frontend created
batch  Job                    default    python-app-post-install-hook  Succeeded               PostSync  Reached expecte
```

## Testing sync workflow
After added changes for values.yaml: 
```
argocd app get python-app
Name:               argocd/python-app
Project:            default
Server:             https://kubernetes.default.svc
Namespace:          default
URL:                https://localhost:8080/applications/python-app
Source:
- Repo:             https://github.com/JulyMartynova/S25-core-course-labs.git
  Target:           lab13
  Path:             k8s/app-python
  Helm Values:      values.yaml
SyncWindow:         Sync Allowed
Sync Policy:        Automated
Sync Status:        Synced to lab13 (fa4dfb1)
Health Status:      Progressing

GROUP  KIND                   NAMESPACE  NAME                          STATUS     HEALTH       HOOK      MESSAGE
batch  Job                    default    python-app-pre-install-hook   Succeeded               PreSync   Reached expected number of succeeded pods
       Secret                 default    my-app-secret                 Synced                            secret/my-app-secret created
       ConfigMap              default    python-app-app-config         Synced                            configmap/python-app-app-config created
       ConfigMap              default    python-app-db-init            Synced                            configmap/python-app-db-init created
       PersistentVolumeClaim  default    python-app-db-pvc             Synced     Healthy                persistentvolumeclaim/python-app-db-pvc created
       PersistentVolumeClaim  default    python-app-visits-pvc         Synced     Healthy                persistentvolumeclaim/python-app-visits-pvc created
       Service                default    python-app-backend-svc        Synced     Healthy                service/python-app-backend-svc created
       Service                default    python-app-db-svc             Synced     Healthy                service/python-app-db-svc created
       Service                default    python-app-frontend-svc       Synced     Healthy                service/python-app-frontend-svc created
apps   Deployment             default    python-app-backend            Synced     Progressing            deployment.apps/python-app-backend created
apps   Deployment             default    python-app-db                 Synced     Healthy                deployment.apps/python-app-db created
apps   Deployment             default    python-app-frontend           Synced     Healthy                deployment.apps/python-app-frontend created
batch  Job                    default    python-app-post-install-hook  Succeeded               PostSync  Reached expecte
```
# Task 2
I created two `kubectl namespaces` and two configuration files and two `values.yaml` files for prod and dev. 
## The status of dev:
```bash
argocd app get python-dev
Name:               argocd/python-dev
Project:            default
Server:             https://kubernetes.default.svc
Namespace:          dev
URL:                https://localhost:8080/applications/python-dev
Source:
- Repo:             https://github.com/JulyMartynova/S25-core-course-labs.git
  Target:           lab13
  Path:             k8s/app-python
  Helm Values:      values-dev.yaml
SyncWindow:         Sync Allowed
Sync Policy:        Automated
Sync Status:        Synced to lab13 (61c3541)
Health Status:      Healthy

GROUP  KIND                   NAMESPACE  NAME                         STATUS     HEALTH       HOOK     MESSAGE
batch  Job                    dev        python-dev-pre-install-hook  Succeeded               PreSync  Reached expected number of succeeded pods
       Secret                 dev        python-dev-my-app-secret     Synced                           secret/python-dev-my-app-secret created
       ConfigMap              dev        python-dev-db-init           Synced                           configmap/python-dev-db-init created
       ConfigMap              dev        python-dev-app-config        Synced                           configmap/python-dev-app-config created
       PersistentVolumeClaim  dev        python-dev-db-pvc            Synced     Healthy               persistentvolumeclaim/python-dev-db-pvc created
       PersistentVolumeClaim  dev        python-dev-visits-pvc        Synced     Healthy               persistentvolumeclaim/python-dev-visits-pvc created
       Service                dev        python-dev-backend-svc       Synced     Healthy               service/python-dev-backend-svc created
       Service                dev        python-dev-db-svc            Synced     Healthy               service/python-dev-db-svc created
       Service                dev        python-dev-frontend-svc      Synced     Healthy               service/python-dev-frontend-svc created
apps   Deployment             dev        python-dev-backend           Synced     Healthy               deployment.apps/python-dev-backend created
apps   Deployment             dev        python-dev-frontend          Synced     Healhty               deployment.apps/python-dev-frontend created
apps   Deployment             dev        python-dev-db                Synced     Healthy               deployment.apps/python-dev-db created
```
## The status of prod: 
```
argocd app get python-prod
Name:               argocd/python-prod
Project:            default
Server:             https://kubernetes.default.svc
Namespace:          prod
URL:                https://localhost:8080/applications/python-prod
Source:
- Repo:             https://github.com/JulyMartynova/S25-core-course-labs.git
  Target:           lab13
  Path:             k8s/app-python
  Helm Values:      values-prod.yaml
SyncWindow:         Sync Allowed
Sync Policy:        Automated
Sync Status:        Synced to lab13 (61c3541)
Health Status:      Progressing

GROUP  KIND                   NAMESPACE  NAME                          STATUS     HEALTH       HOOK     MESSAGE
batch  Job                    prod       python-prod-pre-install-hook  Succeeded               PreSync  Reached expected number of succeeded pods
       Secret                 prod       python-prod-my-app-secret     Synced                           secret/python-prod-my-app-secret created
       ConfigMap              prod       python-prod-db-init           Synced                           configmap/python-prod-db-init created
       ConfigMap              prod       python-prod-app-config        Synced                           configmap/python-prod-app-config created
       PersistentVolumeClaim  prod       python-prod-visits-pvc        Synced     Healthy               persistentvolumeclaim/python-prod-visits-pvc created
       PersistentVolumeClaim  prod       python-prod-db-pvc            Synced     Healthy               persistentvolumeclaim/python-prod-db-pvc created
       Service                prod       python-prod-db-svc            Synced     Healthy               service/python-prod-db-svc created
       Service                prod       python-prod-backend-svc       Synced     Healthy               service/python-prod-backend-svc created
       Service                prod       python-prod-frontend-svc      Synced     Healthy               service/python-prod-frontend-svc created
apps   Deployment             prod       python-prod-frontend          Synced     Progressing           deployment.apps/python-prod-frontend created
apps   Deployment             prod       python-prod-backend           Synced     Progressing           deployment.apps/python-prod-backend created
apps   Deployment             prod       python-prod-db                Synced     Progressing           deployment.apps/python-prod-db created
```
## All pods:
```bash
kubectl get pod -n prod
NAME                                    READY   STATUS                            RESTARTS      AGE
python-prod-backend-6cf4fbb95d-4d8wm    1/1     Running                           0             5m45s
python-prod-backend-6cf4fbb95d-b52cw    1/1     Running                           0             5m45s
python-prod-backend-6cf4fbb95d-vnlvr    1/1     Running                           0             5m45s
python-prod-db-784d87b657-snl66         1/1     Running                           0             5m45s
python-prod-frontend-785c566ff9-qp5nx   1/1     Running                           4 (65s ago)   5m45s
python-prod-pre-install-hook-k4wjt      0/1     Completed                         0             6m18s
```
```bash
kubectl get pod -n dev
AME                                   READY   STATUS                            RESTARTS        AGE
python-dev-backend-7cc6cd4d5b-4bppq    1/1     Running                           0               7m55s
python-dev-db-5f6ff449b7-dqf7r         1/1     Running                           0               7m55s
python-dev-frontend-7bd7c94dbc-ch82p   1/1     Running                           1 (6m52s ago)   7m55s
python-dev-pre-install-hook-zdbdg      0/1     Completed                         0               8m23s
```
## Test 1 
If I have a lot of deployments, I use bakcend deploymen modification:
``` bash
kubectl patch deployment python-prod-backend -n prod --patch '{"spec":{"replicas": 4}}'
deployment.apps/python-prod-backend patched
```
I get 4 replicas of backend as expected:
```
kubectl get pod -n prod
NAME                                    READY   STATUS                            RESTARTS      AGE
python-prod-backend-6cf4fbb95d-4d8wm    1/1     Running                           0             15m
python-prod-backend-6cf4fbb95d-b52cw    1/1     Running                           0             15m
python-prod-backend-6cf4fbb95d-vnlvr    1/1     Running                           0             15m
python-prod-backend-6cf4fbb95d-zh8n2    1/1     Running                           0             42s
python-prod-db-784d87b657-snl66         1/1     Running                           0             15m
python-prod-frontend-785c566ff9-qp5nx   1/1     Running                           8 (42s ago)   15m
python-prod-pre-install-hook-k4wjt      0/1     Completed                         0             15m
```
## Test 2
```
kubectl delete pod -n prod -l app=python-prod-backend
pod "python-prod-backend-6cf4fbb95d-4d8wm" deleted
pod "python-prod-backend-6cf4fbb95d-b52cw" deleted
pod "python-prod-backend-6cf4fbb95d-vnlvr" deleted
pod "python-prod-backend-6cf4fbb95d-zh8n2" deleted
```
Let's check the recreation of backend deployment the count of that is 4.
```
kubectl get 
NAME                                    READY   STATUS                            RESTARTS         AGE
python-prod-backend-6cf4fbb95d-k27jd    1/1     Running                           0                3m46s
python-prod-backend-6cf4fbb95d-k9m4r    1/1     Running                           0                3m45s
python-prod-backend-6cf4fbb95d-nxhc4    1/1     Running                           0                3m48s
python-prod-backend-6cf4fbb95d-op3ds    1/1     Running                           0                3m49s
python-prod-db-784d87b657-snl66         1/1     Running                           0                24m
python-prod-frontend-785c566ff9-qp5nx   1/1     Running                           0                24m
python-prod-pre-install-hook-k4wjt      0/1     Completed                         0                24m

```

