# Lab 11
## Task1
1. Creating secrets
```bash
kubectl create secret generic my-app-secret   --from-literal=POSTGRES_DB=mydatabase   --from-literal=POSTGRES_USER=myuser   --from-literal=POSTGRES_PASSWORD=mypassword
secret/my-app-secret created
```
2. Confirm secrets:
```bash
kubectl get secret my-app-secret -o jsonpath='{.data}'
{"POSTGRES_DB":"bXlkYXRhYmFzZQ==","POSTGRES_PASSWORD":"bXlwYXNzd29yZA==","POSTGRES_USER":"bXl1c2Vy"}j
```
3. Decode secrets:
```bash
echo 'bXlkYXRhYmFzZQ==' | base64 --decode 
times
echo 'bXlwYXNzd29yZA==' | base64 --decode 
mypassword
echo  'bXl1c2Vy'| base64 --decode 
myuser
```
4. Confirmation of `secrets.yaml`
```bash
kubectl get secrets
NAME                                  TYPE                 DATA   AGE
my-app-secret                         Opaque               3      25m
sh.helm.release.v1.app-python-v4.v1   helm.sh/release.v1   1      3d23h
sh.helm.release.v1.my-app.v1          helm.sh/release.v1   1      2d18h
```
5. All pods
```bash
kubectl get po
NAME                               READY   STATUS                            RESTARTS      AGE
my-app-backend-c6bb94c94-jdmzx     1/1     Running                           0             26s
my-app-db-5d695d7d8d-5nnkj         1/1     Running                           0             26s
my-app-frontend-5d4cf5c5dc-wh925   1/1     Running                           0             2d18h
```
6. Verification that secret in the pod:
```bash
kubectl exec my-app-backend-c6bb94c94-jdmzx  -- printenv | grep POSTGRES_DB
POSTGRES_DB=times
kubectl exec my-app-backend-c6bb94c94-jdmzx  -- printenv | grep POSTGRES_PASSWORD
POSTGRES_PASSWORD=mypassword
kubectl exec my-app-backend-c6bb94c94-jdmzx  -- printenv | grep POSTGRES_USER
POSTGRES_USER=myuser
```
